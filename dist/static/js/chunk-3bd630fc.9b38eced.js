(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3bd630fc","chunk-2d0e9376"],{"141f":function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));r("99af"),r("e9c4"),r("ac1f"),r("5319");var n=r("5c96"),i=r("bc3a"),o=r.n(i),a="9addfce3712d04898b5a3dbb223db38b8d6495d2e66d07e3c0af71a708ee3b54",s="1f73096ce60406eba8fb297a16245eadf2777540abdf531266b406b2479e25fe",l=6048e5;function c(e,t,r,n,i,o){var a="0";if(!a||0==a)return!0;var s=r+"_"+e+"_"+t;console.log(s);try{if("undefined"!==typeof window){var c=localStorage.getItem(s);if(c){var d=(new Date).getTime()-parseInt(c);if(d<l)return console.log("checked ..."),!0}}}catch(m){console.error(m)}return u(e,t,s,n,i,o)}function u(e,t,r,n,i,o){var a=h("code");if(!a)return d(n,i,o),!1;p(a,n,e,t,r,i,o)}function d(e,t,r){var i="\n\t\t<div>\n\t\t\t<p><b>嗨，同学，来支持一下 ".concat(t," 吧，为项目点个 star ！</b></p>\n\t\t\t<div>仅需两步即可完成：<br>\n\t\t\t\t<div>1、打开 ").concat(t," <a href=").concat(r,' target="_blank" style="color: red">').concat(t,"</a>，在右上角点个 star 。</div>\n\t\t\t\t<div>2、点击下方 [ 同意授权检测 ] 按钮，同意 ").concat(t,"  获取 API 权限进行检测。</div>\n\t\t\t</div>\n\t\t\t<p><b>本页面将在 star 后正常开放展示</b></p>\n\t\t</div>\n\t\t");n["MessageBox"].alert(i,"温馨提示",{confirmButtonText:"同意授权检测",showClose:!1,dangerouslyUseHTMLString:!0,callback:function(t){"confirm"===t&&f(e)}})}function m(e,t,r,i,o,a,s,l){var c="\n\t\t<div>\n\t\t\t<p><b>嗨，同学，来支持一下 ".concat(t," 吧，为项目点个 star ！</b></p>\n\t\t\t<div>点击【去Star】按钮。进入").concat(t," 开源项目主页，在右上角点个 star 。</div>\n\t\t\t<p><b>本页面将在 star 后正常开放展示</b></p>\n\t\t</div>\n\t\t");n["MessageBox"].confirm(c,"温馨提示",{closeOnClickModal:!1,confirmButtonText:"去Star",cancelButtonText:"我已Star",showClose:!1,dangerouslyUseHTMLString:!0,callback:function(n){"confirm"===n&&(window.open(r),m(e,t,r,i,o,a,s,l)),"cancel"===n&&v(i,o,a,s,t,r,e,l)}})}function f(e){location.href="https://gitee.com/oauth/authorize?client_id="+a+"&redirect_uri="+e+"&response_type=code&scope=user_info"}function p(e,t,r,n,i,c,u){o.a.post("https://gitee.com/oauth/token",{grant_type:"authorization_code",code:e,client_id:a,redirect_uri:t,client_secret:s}).then((function(o){var a=o.data.access_token;v(a,r,n,i,c,u,t,e)})).catch((function(t){if(console.log("请求错误 ",t),t.response&&(0===t.response.status||502===t.response.status)){var r=l-864e5;"undefined"!==typeof window&&localStorage.setItem(i,(new Date).getTime()-r),location.href=location.href.replace("?code="+e,"")}var n=t.response&&t.response.data.error||JSON.stringify(t);if("invalid_grant"===n){console.log("无效code",e);var o=location.href.replace("?code="+e,"");o=o.replace("&code="+e,""),location.href=o}}))}function v(e,t,r,i,a,s,l,c){o.a.get("https://gitee.com/api/v5/user/starred/".concat(t,"/").concat(r),{params:{access_token:e}}).then((function(e){console.log("-> stared ..."),"undefined"!==typeof window&&localStorage.setItem(i,(new Date).getTime()),n["Message"].success("感谢你的支持  ❤️ ❤️ ❤️ ，我们将努力变得更加完善！"),setTimeout((function(){location.href=location.href.replace("?code="+c,"")}),1e3)})).catch((function(n){n.response&&404===n.response.status&&(console.log("not star ..."),m(l,a,s,e,t,r,i,c))}))}function h(e){var t=window.location.href.split("?");if(t.length<2)return null;for(var r=t[1],n={},i=r.split("&"),o=0;o<i.length;o++){var a=i[o].split("=");n[a[0]]=a[1]}return n[e]}},"47ca":function(e,t,r){"use strict";r("bc59")},"8d1e":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"w200"},[r("el-cascader",e._b({ref:"AddressSelector",attrs:{props:{checkStrictly:!0},options:e.menuOptions,clearable:"",placeholder:"请选择...",size:e.size},model:{value:e.tempValue,callback:function(t){e.tempValue=t},expression:"tempValue"}},"el-cascader",e.$props,!1))],1)},i=[],o=r("5530"),a=(r("b0c0"),r("d3b7"),r("0643"),r("4e3e"),r("159b"),r("2f62")),s={name:"AddressSelector",props:["value","props","size"],computed:Object(o["a"])(Object(o["a"])({},Object(a["b"])(["areaSelect"])),{},{tempValue:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},menuOptions:function(){return this.areaSelect&&0!==this.areaSelect.length?(this.recurs(this.areaSelect),this.areaSelect):[]}}),created:function(){this.$store.dispatch("mall/loadAreaSelect")},methods:{recurs:function(e){var t=this;e.forEach((function(e){e.label=e.name,e.value=e.name,e.children&&t.recurs(e.children)}))}}},l=s,c=r("2877"),u=Object(c["a"])(l,n,i,!1,null,null,null);t["default"]=u.exports},"93e7":function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));r("d3b7"),r("4d63"),r("c607"),r("ac1f"),r("2c3e"),r("00b4"),r("25f0"),r("5319");function n(e,t){if(!e||0===e)return"";if(!(e instanceof Date)&&(e=new Date(e),"Invalid Date"===e.toString()))return"无效时间戳";t=t||"yyyy-MM-dd hh:mm:ss";var r={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var n in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),r)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?r[n]:("00"+r[n]).substr((""+r[n]).length)));return t}function i(e){var t=new Date;t.setDate(t.getDate()+e);var r=t.getFullYear(),n=t.getMonth()+1,i=t.getDate();return r+"-"+n+"-"+i}function o(e,t){if(!(e.type instanceof Date))return e;var r=new Date(e.getTime());return r.setDate(e.getDate()+t),r}function a(e,t){if(!(e.type instanceof Date))return e;var r=new Date(e.getTime()+60*t*60*1e3);return r}function s(e,t){var r=new Date;r.setMonth(r.getMonth()+t);var n=r.getFullYear(),i=r.getMonth()+1,o=r.getDate();return n+"-"+i+"-"+o}function l(e,t){return parseInt((t-e)/1e3/60/60/24)}function c(e,t){return parseInt((t-e)/1e3/60/60/24)+1}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(null==e)return null;var t=new Date((new Date).setHours(0,0,0,0)).getTime();return new Date(t+864e5*e)}function d(e){var t=u(0),r=u(0);return r.setTime(r.getTime()-864e5*e),{end:t,start:r}}function m(){var e=[{text:"今天",onClick:function(e){var t=d(0),r=t.end,n=t.start;e.$emit("pick",[n,r])}},{text:"昨天",onClick:function(e){var t=u(0);t.setTime(t.getTime()-864e5),e.$emit("pick",[t,t])}},{text:"最近一周",onClick:function(e){var t=d(7),r=t.end,n=t.start;e.$emit("pick",[n,r])}},{text:"最近一个月",onClick:function(e){var t=d(30),r=t.end,n=t.start;e.$emit("pick",[n,r])}},{text:"最近三个月",onClick:function(e){var t=d(90),r=t.end,n=t.start;e.$emit("pick",[n,r])}}];return e}function f(){var e=[{text:"今天",onClick:function(e){var t=new Date;e.$emit("pick",[new Date(t.setHours(0,0,0,0)),new Date(t.setHours(23,59,59,0))])}},{text:"昨天",onClick:function(e){var t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",[new Date(t.setHours(0,0,0,0)),new Date(t.setHours(23,59,59,0))])}},{text:"前一周",onClick:function(e){var t=new Date,r=new Date;t.setTime(r.getTime()-5184e5),e.$emit("pick",[new Date(t.setHours(0,0,0,0)),new Date(r.setHours(23,59,59,0))])}},{text:"这个月",onClick:function(e){var t=i(),r=n();function n(){var e=new Date;return e.setDate(1),e}function i(){var e=new Date,t=e.getMonth(),r=++t,n=new Date(e.getFullYear(),r,1),i=864e5;return new Date(n-i)}e.$emit("pick",[new Date(r.setHours(0,0,0,0)),new Date(t.setHours(23,59,59,0))])}},{text:"前一个月",onClick:function(e){var t=new Date,r=new Date;t.setTime(r.getTime()-25056e5),e.$emit("pick",[new Date(t.setHours(0,0,0,0)),new Date(r.setHours(23,59,59,0))])}}];return e}t["b"]={getAfterDate:i,getAfterMounth:s,dateDiff:l,dateDiffIncludeToday:c,getAfterDateReturnDate:o,getAfterHourReturnDate:a,getTimeShort:m,getTimeShort2:f,dateFormat:n,getStartEnd:d,getMorningTime:u}},af7a:function(e,t,r){"use strict";r.d(t,"g",(function(){return i})),r.d(t,"f",(function(){return o})),r.d(t,"e",(function(){return a})),r.d(t,"a",(function(){return s})),r.d(t,"i",(function(){return l})),r.d(t,"b",(function(){return c})),r.d(t,"d",(function(){return u})),r.d(t,"h",(function(){return d})),r.d(t,"c",(function(){return m})),r.d(t,"j",(function(){return f})),r.d(t,"k",(function(){return p}));var n=r("b775");function i(e,t){return Object(n["a"])({url:"/oms/order/list",method:"post",data:e,params:t})}function o(e){return Object(n["a"])({url:"/oms/order/"+e,method:"get"})}function a(e){return Object(n["a"])({url:"/oms/order/decryptPhone/"+e,method:"get"})}function s(e){return Object(n["a"])({url:"/oms/order",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/oms/order",method:"put",data:e})}function c(e){return Object(n["a"])({url:"/oms/order/"+e,method:"delete"})}function u(e){return Object(n["a"])({url:"/oms/order/export",method:"get",params:e})}function d(e){return Object(n["a"])({url:"/oms/order/merchantNote/add",method:"post",data:e})}function m(e){return Object(n["a"])({url:"/oms/order/deliverProduct",method:"post",data:e})}function f(e){return Object(n["a"])({url:"/oms/order/receiver/update",method:"post",data:e})}function p(e){return Object(n["a"])({url:"/oms/order/log/"+e,method:"get"})}},bc59:function(e,t,r){},e533:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.show?r("div",{staticClass:"app-container"},[r("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",staticClass:"ry_form",attrs:{model:e.queryParams,inline:!0,"label-width":"100px",size:"medium"}},[r("el-form-item",{attrs:{label:"订单状态",prop:"status"}},[r("DictRadio",{attrs:{radioData:e.dict.type.oms_order_status,size:"small","show-all":"all",filter:["11","12","13","14"]},on:{change:e.handleQuery},model:{value:e.queryParams.status,callback:function(t){e.$set(e.queryParams,"status",t)},expression:"queryParams.status"}})],1),r("el-form-item",{attrs:{label:"订单编号",prop:"orderSn"}},[r("el-input",{attrs:{placeholder:"请输入订单编号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.orderSn,callback:function(t){e.$set(e.queryParams,"orderSn","string"===typeof t?t.trim():t)},expression:"queryParams.orderSn"}})],1),r("el-form-item",{attrs:{label:"会员手机号",prop:"userPhone"}},[r("el-input",{attrs:{placeholder:"请输入会员手机号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.userPhone,callback:function(t){e.$set(e.queryParams,"userPhone","string"===typeof t?t.trim():t)},expression:"queryParams.userPhone"}})],1),r("el-form-item",{attrs:{label:"省市区",prop:"provinces"}},[r("address-selector",{attrs:{size:"small"},model:{value:e.queryParams.provinces,callback:function(t){e.$set(e.queryParams,"provinces",t)},expression:"queryParams.provinces"}})],1),r("el-form-item",{attrs:{label:"下单时间",prop:"Time"}},[r("el-date-picker",{attrs:{type:"datetimerange","picker-options":e.pickerOptions,"range-separator":"至",size:"small",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["00:00:00","23:59:59"],align:"right"},on:{change:e.handleChange},model:{value:e.queryParams.Time,callback:function(t){e.$set(e.queryParams,"Time",t)},expression:"queryParams.Time"}})],1),r("el-form-item",{staticClass:"flex_one tr"},[r("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),r("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.omsOrderList,border:"","cell-class-name":"my-cell"},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),r("el-table-column",{attrs:{label:"收件信息",prop:"receiverName",width:"280"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",[r("span",[e._v(e._s(t.row.decrypt?t.row.receiverName:e.getHiddenName(t.row.receiverName))+" "+e._s(t.row.receiverPhone))]),r("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"text"},on:{click:function(r){return e.handleWatch(t.row)}}},[e._v("查看 ")]),r("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(r){return e.handleUpdate(t.row)}}},[e._v("修改 ")])],1),r("div",[r("span",[e._v(e._s(t.row.receiverProvince)+e._s(t.row.receiverCity)+e._s(t.row.receiverDistrict))]),r("span",[e._v(e._s(t.row.decrypt?t.row.receiverDetailAddress:e.getHiddenDetailAddress(t.row.receiverDetailAddress)))])])]}}],null,!1,3998956212)}),r("el-table-column",{attrs:{label:"客户信息",prop:"receiverName",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("p",[e._v(e._s(t.row.nickName))]),r("p",[e._v(e._s(t.row.mark))])]}}],null,!1,320478665)}),r("el-table-column",{attrs:{label:"备注留言",prop:"note",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",[t.row.merchantNote?r("span",{staticClass:"note-title",staticStyle:{"margin-right":"10px"}},[e._v("平台备注")]):e._e(),r("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(r){return e.handleSaveNote(t.row)}}},[e._v(e._s(t.row.merchantNote?"修改":"添加平台备注")+" ")])],1),t.row.merchantNote?r("div",[e._v(e._s(t.row.merchantNote))]):e._e(),t.row.note?r("div",{staticClass:"note-title"},[e._v("买家备注")]):e._e(),t.row.note?r("div",[e._v(e._s(t.row.note))]):e._e()]}}],null,!1,826987573)}),r("el-table-column",{attrs:{label:"下单时间/支付时间",prop:"payTime",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.createTime?r("div",[e._v(e._s(e.parseTime(t.row.createTime,"{mm}-{dd} {hh}:{ii}"))+" 下单")]):e._e(),t.row.payTime?r("div",[e._v(e._s(e.parseTime(t.row.payTime,"{mm}-{dd} {hh}:{ii}"))+" 支付")]):e._e()]}}],null,!1,3321880829)}),r("el-table-column",{attrs:{label:"优惠券",prop:"couponAmount",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.couponAmount?r("div",[e._v("￥"+e._s(t.row.couponAmount))]):r("div",[e._v("无")])]}}],null,!1,1162592639)}),r("el-table-column",{attrs:{label:"合计",prop:"totalAmount",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",[r("span",[e._v("总数： ")]),r("span",{staticStyle:{color:"red"}},[e._v(e._s(t.row.buyNum))])]),r("div",[e._v("实付： ￥"+e._s(t.row.payAmount))])]}}],null,!1,2017453730)}),r("el-table-column",{attrs:{label:"商品规格",prop:"productList",width:"280"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.productList,(function(t){return r("div",{staticClass:"product-container"},[r("el-popover",{attrs:{placement:"right",trigger:"hover"}},[r("el-image",{staticStyle:{width:"350px",height:"350px"},attrs:{src:t.pic}}),r("el-image",{staticClass:"small-img product-item",staticStyle:{width:"40px",height:"40px"},attrs:{slot:"reference",src:t.pic},slot:"reference"})],1),r("div",{staticClass:"product-item",staticStyle:{"margin-left":"5px"}},[r("div",{staticClass:"sp-data"},e._l(JSON.parse(t.spData),(function(t,n){return r("span",[e._v(e._s(n)+"："+e._s(t)+" ")])})),0),r("div",{staticClass:"product-item quantity"},[r("span",{staticStyle:{"margin-right":"10px"}},[e._v("￥"+e._s(t.salePrice))]),r("span",[e._v("x"+e._s(t.buyNum))])])])],1)}))}}],null,!1,1167795071)}),r("el-table-column",{attrs:{label:"订单状态",prop:"status",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",[r("el-tag",{staticStyle:{"margin-right":"10px"},attrs:{type:e.getOrderStatusTag(t.row.status)}},[e._v(" "+e._s(e.getOrderStatusText(t.row.status))+" ")])],1),t.row.deliverySn?r("div",[e._v("物流单号："+e._s(t.row.deliverySn)+" "),r("el-link",{attrs:{underline:!1},on:{click:function(r){return e.copy(t.row.deliverySn)}}},[r("i",{staticClass:"el-icon-document-copy el-icon--right"})])],1):e._e(),t.row.deliveryTime?r("div",[e._v("发货时间："+e._s(e.parseTime(t.row.deliveryTime,"")))]):e._e()]}}],null,!1,2886830203)}),r("el-table-column",{attrs:{label:"订单编号/操作","class-name":"small-padding fixed-width",width:"220",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticStyle:{float:"right"}},[e._v(" "+e._s(t.row.orderSn)+" "),r("el-link",{attrs:{underline:!1},on:{click:function(r){return e.copy(t.row.orderSn)}}},[r("i",{staticClass:"el-icon-document-copy el-icon--right"})])],1),r("div",{staticStyle:{float:"right"}},[r("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["oms:order:query"],expression:"['oms:order:query']"}],attrs:{size:"mini",type:"text"},on:{click:function(r){return e.goDetail(t.row)}}},[e._v("详情 ")]),r("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["oms:order:log"],expression:"['oms:order:log']"}],attrs:{size:"mini",type:"text"},on:{click:function(r){return e.showLog(t.row.id)}}},[e._v("日志 ")]),r("el-button",{attrs:{size:"mini",type:"text",disabled:1!==t.row.status&&2!==t.row.status&&3!==t.row.status},on:{click:function(r){return e.handleDelivery(t.row)}}},[e._v("发货 ")])],1)]}}],null,!1,1763569)})],1),r("InBody",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}]},[r("pagination",{attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],1),r("el-dialog",{attrs:{title:e.deliveryObj.title,visible:e.deliveryObj.open,width:"500px","append-to-body":""},on:{"update:visible":function(t){return e.$set(e.deliveryObj,"open",t)}}},[r("el-form",{ref:"deliveryForm",attrs:{model:e.deliveryObj.form,rules:e.deliveryObj.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"快递公司",prop:"expressName"}},[r("el-select",{attrs:{placeholder:"请选择快递公司",clearable:"",size:"small",filterable:""},model:{value:e.deliveryObj.form.expressName,callback:function(t){e.$set(e.deliveryObj.form,"expressName",t)},expression:"deliveryObj.form.expressName"}},[r("el-option",{attrs:{label:"顺丰速运",value:"1"}}),r("el-option",{attrs:{label:"申通快递",value:"2"}}),r("el-option",{attrs:{label:"圆通快递",value:"2"}})],1)],1),r("el-form-item",{attrs:{label:"快递单号",prop:"expressSn"}},[r("el-input",{attrs:{placeholder:"请输入快递单号","controls-position":"right",min:0},model:{value:e.deliveryObj.form.expressSn,callback:function(t){e.$set(e.deliveryObj.form,"expressSn",t)},expression:"deliveryObj.form.expressSn"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitDelivery("deliveryForm")}}},[e._v("确 定 ")]),r("el-button",{on:{click:e.cancelDelivery}},[e._v("取 消")])],1)],1),r("el-dialog",{attrs:{title:e.noteObj.title,visible:e.noteObj.open,width:"500px","append-to-body":""},on:{"update:visible":function(t){return e.$set(e.noteObj,"open",t)}}},[r("el-form",{ref:"noteForm",attrs:{model:e.noteObj.form,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"备注",prop:"merchantNote"}},[r("el-input",{attrs:{type:"textarea","controls-position":"right",min:0,rows:3},model:{value:e.noteObj.form.merchantNote,callback:function(t){e.$set(e.noteObj.form,"merchantNote",t)},expression:"noteObj.form.merchantNote"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.submitNoteForm()}}},[e._v(" 确认修改 ")]),r("el-button",{attrs:{size:"small"},on:{click:e.cancelNote}},[e._v("取 消")])],1)],1),r("el-dialog",{attrs:{title:e.logObj.title,visible:e.logObj.open,width:"500px","append-to-body":""},on:{"update:visible":function(t){return e.$set(e.logObj,"open",t)}}},[r("el-timeline",e._l(e.logObj.logList,(function(t){return r("el-timeline-item",{attrs:{placement:"top",timestamp:e.parseTime(t.createTime,"")}},[r("el-card",[r("h4",[e._v(e._s(e.getLogEvent(t.orderStatus)))]),r("br"),r("h4",[e._v("操作人："+e._s(t.operateMan))]),t.note?r("br"):e._e(),t.note?r("h4",[e._v("备注："+e._s(t.note))]):e._e()])],1)})),1)],1),r("el-dialog",{attrs:{title:"修改收件信息",visible:e.modifyReceiverInfo.open,width:"500px","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){return e.$set(e.modifyReceiverInfo,"open",t)}}},[r("el-form",{ref:"modifyReceiverInfoForm",attrs:{model:e.modifyReceiverInfo.form,"label-width":"100px",rules:e.modifyReceiverInfo.rules}},[r("el-form-item",{attrs:{label:"收件人姓名",prop:"receiverName"}},[r("el-input",{model:{value:e.modifyReceiverInfo.form.receiverName,callback:function(t){e.$set(e.modifyReceiverInfo.form,"receiverName",t)},expression:"modifyReceiverInfo.form.receiverName"}})],1),r("el-form-item",{attrs:{label:"收件人电话",prop:"receiverPhone"}},[r("el-input",{model:{value:e.modifyReceiverInfo.form.receiverPhone,callback:function(t){e.$set(e.modifyReceiverInfo.form,"receiverPhone",t)},expression:"modifyReceiverInfo.form.receiverPhone"}})],1),r("el-form-item",{attrs:{label:"省市区",prop:"fullArea"}},[r("AddressSelector",{staticStyle:{width:"100%"},model:{value:e.modifyReceiverInfo.form.fullArea,callback:function(t){e.$set(e.modifyReceiverInfo.form,"fullArea",t)},expression:"modifyReceiverInfo.form.fullArea"}})],1),r("el-form-item",{attrs:{label:"详细地址",prop:"receiverDetailAddress"}},[r("el-input",{model:{value:e.modifyReceiverInfo.form.receiverDetailAddress,callback:function(t){e.$set(e.modifyReceiverInfo.form,"receiverDetailAddress",t)},expression:"modifyReceiverInfo.form.receiverDetailAddress"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.asyncOk}},[e._v(" 确认修改 ")]),r("el-button",{attrs:{size:"small"},on:{click:function(t){e.modifyReceiverInfo.open=!1}}},[e._v("取 消")])],1)],1)],1):e._e()},i=[],o=r("3835"),a=r("c14f"),s=r("1da1"),l=r("5530"),c=(r("d81d"),r("d3b7"),r("0643"),r("a573"),r("af7a")),u=r("8d1e"),d=r("93e7"),m=r("141f"),f=r("2f62"),p={computed:Object(l["a"])({},Object(f["b"])(["userId"])),name:"OmsOrder",dicts:["oms_order_status","oms_pay_type"],components:{AddressSelector:u["default"]},data:function(){var e=this,t=function(t,r,n){var i=e.modifyReceiverInfo.form.fullArea;i.length<3?n(new Error("请选择省市区")):n()};return{show:!1,loading:!0,pickerOptions:{shortcuts:d["b"].getTimeShort2()},exportLoading:!1,ids:[],single:!0,multiple:!0,showSearch:!0,total:0,omsOrderList:[],title:"",open:!1,queryParams:{pageNum:1,pageSize:10,payType:null,status:null,Time:[],provinces:[],receiverProvince:null,receiverCity:null,receiverDistrict:null,orderSn:null,productName:null,userPhone:null,startTime:null,endTime:null},form:{},rules:{memberId:[{required:!0,message:"MEMBER_ID不能为空",trigger:"blur"}],receiverName:[{required:!0,message:"收货人姓名不能为空",trigger:"blur"}],receiverPhone:[{required:!0,message:"收货人电话不能为空",trigger:"blur"}]},showMoreCondition:!1,deliveryObj:{title:"订单发货",form:{orderId:null,expressName:null,expressSn:null},open:!1,rules:{expressName:[{required:!0,message:"快递公司不能为空",trigger:"change"}],expressSn:[{required:!0,message:"快递单号不能为空",trigger:"blur"}]}},noteObj:{title:null,form:{id:null,merchantNote:null},open:!1},logObj:{title:"日志",logList:null,open:!1,loading:!1},modifyReceiverInfo:{open:!1,form:{},rules:{receiverName:[{required:!0,message:"收件人姓名不能为空",trigger:"blur"}],receiverPhone:[{required:!0,message:"收件人电话不能为空",trigger:"blur"}],fullArea:[{required:!0,validator:t,trigger:"change"}],receiverDetailAddress:[{required:!0,message:"详细地址不能为空",trigger:"blur"}]}}}},created:function(){var e=this;return Object(s["a"])(Object(a["a"])().m((function t(){var r,n,i,o,s;return Object(a["a"])().w((function(t){while(1)switch(t.n){case 0:return t.n=1,Object(m["a"])("zccbbg","RuoYi-Mall",e.userId,"https://mall.ichengle.top/order/order","ruoyi-mall-商城","https://gitee.com/zccbbg/RuoYi-Mall");case 1:r=t.v,e.show=r,r&&(n=e.$route.query,i=n.phone,o=n.status,s=n.today,i&&(e.queryParams.userPhone=i),o&&(e.queryParams.status=o),s&&e.setToday(),e.getList());case 2:return t.a(2)}}),t)})))()},methods:{setToday:function(){var e=new Date;this.queryParams.Time[0]=Object(d["a"])(new Date(e.setHours(0,0,0,0)),"yyyy-MM-dd hh:mm:ss"),this.queryParams.Time[1]=Object(d["a"])(new Date(e.setHours(23,59,59,0)),"yyyy-MM-dd hh:mm:ss")},getList:function(){var e=this;this.queryParams.Time&&(this.queryParams.startTime=this.queryParams.Time[0],this.queryParams.endTime=this.queryParams.Time[1]),this.loading=!0;var t=this.queryParams,r=t.pageNum,n=t.pageSize,i=Object(l["a"])(Object(l["a"])({},this.queryParams),{},{pageNum:void 0,pageSize:void 0});if(i.provinces){var a=Object(o["a"])(i.provinces,3),s=a[0],u=a[1],d=a[2];i.receiverProvince=s,i.receiverCity=u,i.receiverDistrict=d}else i.receiverProvince=null,i.receiverCity=null,i.receiverDistrict=null;var m={page:r-1,size:n};Object(c["g"])(i,m).then((function(t){var r=t.content,n=t.totalElements;e.omsOrderList=r,e.total=n,e.loading=!1}))},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={id:null,memberId:null,memberUsername:null,totalAmount:null,purchasePrice:null,payAmount:null,freightAmount:null,payType:null,status:0,aftersaleStatus:0,deliveryCompany:null,deliverySn:null,autoConfirmDay:null,receiverName:null,receiverPhone:null,receiverPostCode:null,receiverProvince:null,receiverCity:null,receiverDistrict:null,receiverDetailAddress:null,note:null,confirmStatus:0,deleteStatus:0,paymentTime:null,deliveryTime:null,receiveTime:null,createBy:null,createTime:null,updateBy:null,updateTime:null},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length},handleAdd:function(){this.reset(),this.open=!0,this.title="添加订单表"},handleUpdate:function(e){var t=this;return Object(s["a"])(Object(a["a"])().m((function r(){var n,i,o;return Object(a["a"])().w((function(r){while(1)switch(r.n){case 0:return r.n=1,t.handleWatch(e);case 1:n=e.receiverCity,i=e.receiverDistrict,o=e.receiverProvince,e.fullArea=[o,n,i],t.modifyReceiverInfo.form=e,t.modifyReceiverInfo.open=!0;case 2:return r.a(2)}}),r)})))()},handleWatch:function(e){Object(c["e"])(e.id).then((function(t){e.receiverPhone=t,e.decrypt=!0}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(null!=e.form.id?Object(c["i"])(e.form).then((function(t){e.$modal.msgSuccess("修改成功"),e.open=!1,e.getList()})):Object(c["a"])(e.form).then((function(t){e.$modal.msgSuccess("新增成功"),e.open=!1,e.getList()})))}))},handleDelete:function(e){var t=this,r=e.id||this.ids;this.$modal.confirm('是否确认删除订单表编号为"'+r+'"的数据项？').then((function(){return Object(c["b"])(r)})).then((function(){t.getList(),t.$modal.msgSuccess("删除成功")})).catch((function(){}))},handleExport:function(){var e=this,t=this.queryParams;this.$modal.confirm("是否确认导出所有订单表数据项？").then((function(){return e.exportLoading=!0,Object(c["d"])(t)})).then((function(t){e.$download.download(t),e.exportLoading=!1})).catch((function(){}))},handleChange:function(e){e||(this.queryParams.startTime=null,this.queryParams.endTime=null)},getOrderStatusTag:function(e){switch(e){case 0:case 1:return"info";case 2:return"primary";case 3:return"success";case 4:return"warning";case 5:return"danger"}},getOrderStatusText:function(e){switch(e){case 0:return"待付款";case 1:return"待发货";case 2:return"已发货";case 3:return"已完成";case 4:return"已关闭";case 5:return"无效订单"}},getLogEvent:function(e){switch(e){case 0:return"用户下单";case 1:return"用户支付成功";case 2:return"平台发货";case 3:return"用户确认收货";case 4:return"取消订单";case 5:return"无效订单"}},getPayTypeTag:function(e){switch(e){case 0:return"info";case 1:return"primary";case 2:return"success"}},getPayTypeText:function(e){switch(e){case 0:return"未支付";case 1:return"支付宝";case 2:return"微信"}},goDetail:function(e){var t=e.id;this.$router.push({path:"/order/detail",query:{id:t}})},copy:function(e){var t=e,r=document.createElement("input");r.value=t,document.body.appendChild(r),r.select(),console.log(r.value),document.execCommand("Copy"),this.$modal.msgSuccess("复制成功"),r.remove()},handleDelivery:function(e){this.deliveryObj.form.orderId=e.id,this.deliveryObj.open=!0},submitDelivery:function(){var e=this;this.$refs["deliveryForm"].validate((function(t){t&&Object(c["c"])(e.deliveryObj.form).then((function(t){e.$modal.msgSuccess("发货成功"),e.cancelDelivery(),e.getList()}))}))},cancelDelivery:function(){this.deliveryObj.open=!1,this.deliveryObj.form.orderId=null,this.deliveryObj.form.expressName=null,this.deliveryObj.form.expressSn=null},handleSaveNote:function(e){var t=e.merchantNote;this.noteObj.title=t?"修改平台备注":"添加平台备注",this.noteObj.form.id=e.id,this.noteObj.form.merchantNote=e.merchantNote,this.noteObj.open=!0},submitNoteForm:function(){var e=this;Object(c["h"])(this.noteObj.form).then((function(t){t>0&&(e.$modal.msgSuccess("修改成功"),e.cancelNote(),e.getList())}))},cancelNote:function(){this.noteObj.open=!1,this.noteObj.form.id=null,this.noteObj.form.merchantNote=null},showLog:function(e){var t=this;this.logObj.loading=!0,Object(c["k"])(e).then((function(e){t.logObj.logList=e,t.logObj.open=!0,t.logObj.loading=!1}))},asyncOk:function(){var e=this;this.$refs["modifyReceiverInfoForm"].validate((function(t){if(t){var r=e.modifyReceiverInfo.form,n=r.id,i=r.receiverName,a=r.fullArea,s=r.receiverPhone,l=r.receiverDetailAddress,u=Object(o["a"])(a,3),d=u[0],m=u[1],f=u[2];Object(c["j"])({id:n,receiverCity:m,receiverDetailAddress:l,receiverDistrict:f,receiverName:i,receiverPhone:s,receiverProvince:d}).then((function(t){e.$modal.msgSuccess("修改成功"),e.getList(),e.modifyReceiverInfo.open=!1}))}}))}}},v=p,h=(r("47ca"),r("2877")),y=Object(h["a"])(v,n,i,!1,null,null,null);t["default"]=y.exports}}]);