(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-90904e4a"],{"141f":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n("99af"),n("e9c4"),n("ac1f"),n("5319");var a=n("5c96"),r=n("bc3a"),o=n.n(r),i="9addfce3712d04898b5a3dbb223db38b8d6495d2e66d07e3c0af71a708ee3b54",c="1f73096ce60406eba8fb297a16245eadf2777540abdf531266b406b2479e25fe",u=6048e5;function s(e,t,n,a,r,o){var i="0";if(!i||0==i)return!0;var c=n+"_"+e+"_"+t;console.log(c);try{if("undefined"!==typeof window){var s=localStorage.getItem(c);if(s){var d=(new Date).getTime()-parseInt(s);if(d<u)return console.log("checked ..."),!0}}}catch(m){console.error(m)}return l(e,t,c,a,r,o)}function l(e,t,n,a,r,o){var i=b("code");if(!i)return d(a,r,o),!1;f(i,a,e,t,n,r,o)}function d(e,t,n){var r="\n\t\t<div>\n\t\t\t<p><b>嗨，同学，来支持一下 ".concat(t," 吧，为项目点个 star ！</b></p>\n\t\t\t<div>仅需两步即可完成：<br>\n\t\t\t\t<div>1、打开 ").concat(t," <a href=").concat(n,' target="_blank" style="color: red">').concat(t,"</a>，在右上角点个 star 。</div>\n\t\t\t\t<div>2、点击下方 [ 同意授权检测 ] 按钮，同意 ").concat(t,"  获取 API 权限进行检测。</div>\n\t\t\t</div>\n\t\t\t<p><b>本页面将在 star 后正常开放展示</b></p>\n\t\t</div>\n\t\t");a["MessageBox"].alert(r,"温馨提示",{confirmButtonText:"同意授权检测",showClose:!1,dangerouslyUseHTMLString:!0,callback:function(t){"confirm"===t&&p(e)}})}function m(e,t,n,r,o,i,c,u){var s="\n\t\t<div>\n\t\t\t<p><b>嗨，同学，来支持一下 ".concat(t," 吧，为项目点个 star ！</b></p>\n\t\t\t<div>点击【去Star】按钮。进入").concat(t," 开源项目主页，在右上角点个 star 。</div>\n\t\t\t<p><b>本页面将在 star 后正常开放展示</b></p>\n\t\t</div>\n\t\t");a["MessageBox"].confirm(s,"温馨提示",{closeOnClickModal:!1,confirmButtonText:"去Star",cancelButtonText:"我已Star",showClose:!1,dangerouslyUseHTMLString:!0,callback:function(a){"confirm"===a&&(window.open(n),m(e,t,n,r,o,i,c,u)),"cancel"===a&&h(r,o,i,c,t,n,e,u)}})}function p(e){location.href="https://gitee.com/oauth/authorize?client_id="+i+"&redirect_uri="+e+"&response_type=code&scope=user_info"}function f(e,t,n,a,r,s,l){o.a.post("https://gitee.com/oauth/token",{grant_type:"authorization_code",code:e,client_id:i,redirect_uri:t,client_secret:c}).then((function(o){var i=o.data.access_token;h(i,n,a,r,s,l,t,e)})).catch((function(t){if(console.log("请求错误 ",t),t.response&&(0===t.response.status||502===t.response.status)){var n=u-864e5;"undefined"!==typeof window&&localStorage.setItem(r,(new Date).getTime()-n),location.href=location.href.replace("?code="+e,"")}var a=t.response&&t.response.data.error||JSON.stringify(t);if("invalid_grant"===a){console.log("无效code",e);var o=location.href.replace("?code="+e,"");o=o.replace("&code="+e,""),location.href=o}}))}function h(e,t,n,r,i,c,u,s){o.a.get("https://gitee.com/api/v5/user/starred/".concat(t,"/").concat(n),{params:{access_token:e}}).then((function(e){console.log("-> stared ..."),"undefined"!==typeof window&&localStorage.setItem(r,(new Date).getTime()),a["Message"].success("感谢你的支持  ❤️ ❤️ ❤️ ，我们将努力变得更加完善！"),setTimeout((function(){location.href=location.href.replace("?code="+s,"")}),1e3)})).catch((function(a){a.response&&404===a.response.status&&(console.log("not star ..."),m(u,i,c,e,t,n,r,s))}))}function b(e){var t=window.location.href.split("?");if(t.length<2)return null;for(var n=t[1],a={},r=n.split("&"),o=0;o<r.length;o++){var i=r[o].split("=");a[i[0]]=i[1]}return a[e]}},1445:function(e,t,n){"use strict";n.d(t,"i",(function(){return r})),n.d(t,"g",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"j",(function(){return c})),n.d(t,"k",(function(){return u})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return m})),n.d(t,"l",(function(){return p})),n.d(t,"f",(function(){return f})),n.d(t,"h",(function(){return h}));var a=n("b775");function r(e,t){return Object(a["a"])({url:"/ums/member/list",method:"post",data:e,params:t})}function o(e){return Object(a["a"])({url:"/ums/member/"+e,method:"get"})}function i(e){return Object(a["a"])({url:"/ums/member",method:"post",data:e})}function c(e){return Object(a["a"])({url:"/ums/member",method:"put",data:e})}function u(e){return Object(a["a"])({url:"/ums/member/mark/update",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/ums/member/"+e,method:"delete"})}function l(e){return Object(a["a"])({url:"/ums/member/export",method:"get",params:e})}function d(e){return Object(a["a"])({url:"/ums/member/status/change",method:"post",data:e})}function m(e){return Object(a["a"])({url:"/ums/member/phone/decrypt/"+e,method:"get"})}function p(e){return Object(a["a"])({url:"/ums/member/view/statistics/"+e,method:"get"})}function f(e){return Object(a["a"])({url:"/ums/member/wechat/code",method:"get",params:e})}function h(e){return Object(a["a"])({url:"/no-auth/verified/code",method:"get",params:e})}},"4fac7":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:"扫描解锁",visible:e.open,width:"500px","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.open=t}}},[n("p",[e._v("使用微信扫描下方二维码，观看完广告获取验证码")]),n("p",{staticClass:"red f13"},[e._v("注：如果第一次扫码未弹出广告，请重新扫码进入")]),n("div",{staticClass:"flex-center"},[n("el-image",{staticClass:"qr-code",attrs:{src:"data:image/png;base64,"+e.miniImg,fit:"fill"}}),n("el-input",{staticClass:"left-input",model:{value:e.qrCode,callback:function(t){e.qrCode=t},expression:"qrCode"}}),n("el-button",{staticClass:"right-btn",attrs:{type:"primary",disabled:!e.qrCode},on:{click:e.asyncOk}},[e._v("提交")])],1)])},r=[],o=n("c14f"),i=n("1da1"),c=n("5530"),u=(n("caad"),n("2532"),n("1445")),s=n("2f62"),l={computed:Object(c["a"])({},Object(s["b"])(["roles"])),data:function(){return{open:!1,miniImg:null,qrCode:null}},methods:{initMiniWechatImg:function(){var e=this;Object(u["f"])({scene:2}).then((function(t){e.miniImg=t.data}))},show:function(){this.roles.includes("admin")?this.$emit("confirmOk",!0):(this.initMiniWechatImg(),this.open=!0)},asyncOk:function(){var e=this;return Object(i["a"])(Object(o["a"])().m((function t(){var n;return Object(o["a"])().w((function(t){while(1)switch(t.n){case 0:return t.n=1,Object(u["h"])({code:e.qrCode}).then((function(e){return e.data}));case 1:n=t.v,n?e.open=!1:e.$message.error("验证码错误"),e.$emit("confirmOk",n);case 2:return t.a(2)}}),t)})))()}}},d=l,m=(n("cdfb"),n("2877")),p=Object(m["a"])(d,a,r,!1,null,null,null);t["a"]=p.exports},cc124:function(e,t,n){},cdfb:function(e,t,n){"use strict";n("cc124")},d35a:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"e",(function(){return c})),n.d(t,"b",(function(){return u}));var a=n("b775");function r(e,t){return Object(a["a"])({url:"/pms/product/list",method:"post",data:e,params:t})}function o(e){return Object(a["a"])({url:"/pms/product/"+e,method:"get"})}function i(e){return Object(a["a"])({url:"/pms/product",method:"post",data:e})}function c(e){return Object(a["a"])({url:"/pms/product",method:"put",data:e})}function u(e){return Object(a["a"])({url:"/pms/product/"+e,method:"delete"})}},e629:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}]},[n("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",staticClass:"ry_form",attrs:{model:e.queryParams,inline:!0,"label-width":"100px",size:"medium"}},[n("el-form-item",{attrs:{label:"上架状态",prop:"publishStatus"}},[n("DictRadio",{attrs:{size:"small",radioData:e.dict.type.pms_publish_status,showAll:"all"},on:{change:e.handleQuery},model:{value:e.queryParams.publishStatus,callback:function(t){e.$set(e.queryParams,"publishStatus",t)},expression:"queryParams.publishStatus"}})],1),n("el-form-item",{attrs:{label:"名称",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入商品名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.nameLike,callback:function(t){e.$set(e.queryParams,"nameLike",t)},expression:"queryParams.nameLike"}})],1),n("el-form-item",{attrs:{label:"品牌",prop:"brandName"}},[n("el-input",{attrs:{placeholder:"请输入品牌名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.brandNameLike,callback:function(t){e.$set(e.queryParams,"brandNameLike",t)},expression:"queryParams.brandNameLike"}})],1),n("el-form-item",{attrs:{label:"分类",prop:"productCategoryName"}},[n("el-input",{attrs:{placeholder:"请输入分类名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.productCategoryNameLike,callback:function(t){e.$set(e.queryParams,"productCategoryNameLike",t)},expression:"queryParams.productCategoryNameLike"}})],1),n("el-form-item",{attrs:{label:"编码",prop:"outProductId"}},[n("el-input",{attrs:{placeholder:"请输入商品编码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.outProductId,callback:function(t){e.$set(e.queryParams,"outProductId",t)},expression:"queryParams.outProductId"}})],1),n("el-form-item",{staticClass:"flex_one tr"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),n("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),n("el-row",{staticClass:"mb8",attrs:{gutter:10}},[n("el-col",{attrs:{span:1.5}},[n("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增")])],1)],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.pmsProductList,border:""},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),n("el-table-column",{attrs:{label:"主图",prop:"pic"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[a.pic?n("el-image",{staticClass:"small-img",attrs:{src:a.pic,"preview-src-list":[a.pic]}}):e._e()]}}])}),n("el-table-column",{attrs:{label:"名称/编码","min-width":"200",prop:"outProductId"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("div",[e._v("名称："+e._s(a.name))]),a.outProductId?n("div",[e._v("编码："+e._s(a.outProductId))]):e._e()]}}])}),n("el-table-column",{attrs:{label:"品牌/分类",prop:"brandName"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[a.brandName?n("div",[e._v("品牌："+e._s(a.brandName))]):e._e(),a.productCategoryName?n("div",[e._v("分类："+e._s(a.productCategoryName))]):e._e()]}}])}),n("el-table-column",{attrs:{label:"价格/排序",prop:"price"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[a.price?n("div",[e._v("价格："+e._s(a.price))]):e._e(),a.sort?n("div",[e._v("排序："+e._s(a.sort))]):e._e()]}}])}),n("el-table-column",{attrs:{label:"上架状态",prop:"publishStatus"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[n("dict-tag",{attrs:{value:t.publishStatus,"prop-name":"pms_publish_status"}})]}}])}),n("el-table-column",{attrs:{label:"操作","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(n){return e.handleUpdate(t.row)}}},[e._v("修改 ")]),n("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(n){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),n("InBody",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}]},[n("pagination",{attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],1)],1)])},r=[],o=n("c14f"),i=n("1da1"),c=n("5530"),u=(n("d81d"),n("d3b7"),n("0643"),n("a573"),n("d35a")),s=n("141f"),l=n("2f62"),d=n("4fac7"),m={name:"PmsProduct",components:{SeeAdsComponent:d["a"]},dicts:["pms_publish_status"],data:function(){return{show:!0,loading:!0,exportLoading:!1,ids:[],single:!0,multiple:!0,showSearch:!0,total:0,pmsProductList:[],queryParams:{pageNum:1,pageSize:10,brandId:null,categoryId:null,outProductId:null,name:null,pic:null,albumPics:null,publishStatus:null,sort:null,price:null,unit:null,weight:null,detailHtml:null,detailMobileHtml:null,brandName:null,productCategoryName:null}}},created:function(){this.getList()},computed:Object(c["a"])({},Object(l["b"])(["userId"])),methods:{confirmOk:function(e){var t=this;return Object(i["a"])(Object(o["a"])().m((function n(){var a;return Object(o["a"])().w((function(n){while(1)switch(n.n){case 0:if(!e){n.n=2;break}return n.n=1,Object(s["a"])("zccbbg","RuoYi-Mall",t.userId,"https://mall.ichengle.top/pms/product","ruoyi-mall-商城","https://gitee.com/zccbbg/RuoYi-Mall");case 1:a=n.v,t.show=a,a&&t.getList();case 2:return n.a(2)}}),n)})))()},getList:function(){var e=this;this.loading=!0;var t=this.queryParams,n=t.pageNum,a=t.pageSize,r=Object(c["a"])(Object(c["a"])({},this.queryParams),{},{pageNum:void 0,pageSize:void 0}),o={page:n-1,size:a};Object(u["d"])(r,o).then((function(t){var n=t.content,a=t.totalElements;e.pmsProductList=n,e.total=a,e.loading=!1}))},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length},handleAdd:function(){this.$router.push({path:"/product/edit"})},handleUpdate:function(e){this.$router.push({path:"/product/edit",query:{id:e.id}})},handleDelete:function(e){var t=this,n=e.id||this.ids;this.$modal.confirm('是否确认删除商品信息编号为"'+n+'"的数据项？').then((function(){return Object(u["b"])(n)})).then((function(){t.getList(),t.$modal.msgSuccess("删除成功")})).catch((function(){}))}}},p=m,f=n("2877"),h=Object(f["a"])(p,a,r,!1,null,null,null);t["default"]=h.exports}}]);