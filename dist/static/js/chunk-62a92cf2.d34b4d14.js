(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-62a92cf2"],{"3d8b":function(e,t,a){},"4ec9":function(e,t,a){"use strict";var r=a("6d61"),s=a("6566");r("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),s)},c5c8:function(e,t,a){"use strict";a.d(t,"f",(function(){return s})),a.d(t,"e",(function(){return n})),a.d(t,"a",(function(){return l})),a.d(t,"g",(function(){return i})),a.d(t,"c",(function(){return o})),a.d(t,"d",(function(){return u})),a.d(t,"b",(function(){return c})),a.d(t,"h",(function(){return d}));var r=a("b775");function s(e,t){return Object(r["a"])({url:"/oms/aftersale/list",method:"post",data:e,params:t})}function n(e){return Object(r["a"])({url:"/oms/aftersale/"+e,method:"get"})}function l(e){return Object(r["a"])({url:"/oms/aftersale",method:"post",data:e})}function i(e){return Object(r["a"])({url:"/oms/aftersale",method:"put",data:e})}function o(e){return Object(r["a"])({url:"/oms/aftersale/"+e,method:"delete"})}function u(e){return Object(r["a"])({url:"/oms/aftersale/export",method:"get",params:e})}function c(e){return Object(r["a"])({url:"/oms/aftersale/dealWith",method:"post",data:e})}function d(e){return Object(r["a"])({url:"/oms/aftersale/log/"+e,method:"get"})}},e3b4:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"order_detail_wrapper"},[a("el-main",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("el-card",[a("el-descriptions",{attrs:{title:"订单信息",column:2,border:"","label-class-name":"my-label",contentClassName:"my-content"}},[a("template",{slot:"extra"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.$router.back()}}},[e._v("返回")])],1),a("el-descriptions-item",{attrs:{label:"订单号"}},[e._v(e._s(e.orderDetail.orderSn))]),a("el-descriptions-item",{attrs:{label:"用户昵称"}},[e._v(e._s(e.orderDetail.nickName))]),a("el-descriptions-item",{attrs:{label:"用户手机号"}},[e._v(e._s(e.orderDetail.phone))]),a("el-descriptions-item",{attrs:{label:"下单时间"}},[e._v(e._s(e.parseTime(e.orderDetail.createTime,"")))]),a("el-descriptions-item",{attrs:{label:"支付方式"}},[e._v(e._s(e.getPayType(e.orderDetail)))]),a("el-descriptions-item",{attrs:{label:"支付时间"}},[e._v(e._s(e.parseTime(e.orderDetail.payTime,"")))]),a("el-descriptions-item",{attrs:{label:"订单状态"}},[e._v(e._s(e.getOrderStatus(e.orderDetail)))])],2)],1),a("el-card",[a("div",{staticStyle:{"font-size":"16px","font-weight":"bold"},attrs:{slot:"header"},slot:"header"},[e._v("售后信息")]),a("el-table",{attrs:{data:e.refundInfoList}},[a("el-table-column",{attrs:{label:"售后单号",prop:"id",width:"150"}}),a("el-table-column",{attrs:{label:"售后类型",prop:"applyRefundType",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(e.getAftersaleType(r)))])]}}])}),a("el-table-column",{attrs:{label:"申请售后时间",prop:"applyRefundTime",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(" "+e._s(e.parseTime(r.applyRefundTime,""))+" ")])]}}])}),a("el-table-column",{attrs:{label:"退款金额",prop:"refundAmount"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" ￥"),a("span",[e._v(e._s(t.row.refundAmount))])]}}])}),a("el-table-column",{attrs:{label:"申请原因",prop:"reason"}}),a("el-table-column",{attrs:{label:"凭证",prop:"proofPics"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[a("el-image",{staticClass:"small-img circle-img",attrs:{src:t.proofPics,"preview-src-list":[t.proofPics]}})]}}])}),a("el-table-column",{attrs:{label:"申请状态",prop:"refundStatus",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(e.getAftersaleStatus(r)))])]}}])}),a("el-table-column",{attrs:{label:"平台拒绝理由",prop:"remark"}}),a("el-table-column",{attrs:{label:"退货快递号",prop:"refundWaybillCode"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleWatch(t.row)}}},[e._v("查看")])]}}])})],1)],1),a("el-card",[a("el-descriptions",{attrs:{title:"收货信息",column:2,border:"","label-class-name":"my-label",contentClassName:"my-content"}},[a("el-descriptions-item",{attrs:{label:"收货人姓名"}},[e._v(e._s(e.addressInfo.name))]),a("el-descriptions-item",{attrs:{label:"收货人手机号"}},[e._v(e._s(e.addressInfo.userPhone))]),a("el-descriptions-item",{attrs:{label:"收货区域"}},[e._v(e._s(e.addressInfo.area))]),a("el-descriptions-item",{attrs:{label:"详细地址"}},[e._v(e._s(e.getHiddenDetailAddress(e.addressInfo.address)))])],1)],1),a("el-card",[a("div",{staticStyle:{"font-size":"16px","font-weight":"bold"},attrs:{slot:"header"},slot:"header"},[e._v("商品信息")]),a("el-table",{attrs:{data:e.products}},[a("el-table-column",{attrs:{label:"商品图片",prop:"pic"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[a("el-image",{staticClass:"small-img circle-img",attrs:{src:t.pic,"preview-src-list":[t.pic]}})]}}])}),a("el-table-column",{attrs:{label:"商品ID",prop:"productId"}}),a("el-table-column",{attrs:{label:"商品名称",prop:"productName"}}),a("el-table-column",{attrs:{label:"商品规格",align:"center",prop:"spData",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(JSON.parse(t.row.spData),(function(t,r){return a("div",[e._v(e._s(r)+"："+e._s(t))])}))}}])}),a("el-table-column",{attrs:{label:"价格",prop:"salePrice"}}),a("el-table-column",{attrs:{label:"购买数量",prop:"buyNum"}})],1)],1),a("el-card",[a("el-descriptions",{attrs:{title:"物流信息",column:3,border:"","label-class-name":"my-label",contentClassName:"my-content"}},[a("el-descriptions-item",{attrs:{label:"发货时间"}},[e._v(e._s(e.parseTime(e.orderDetail.deliveryTime,"")))]),a("el-descriptions-item",{attrs:{label:"快递单号"}},[e._v(e._s(e.orderDetail.expressNo))]),a("el-descriptions-item",{attrs:{label:"物流公司"}},[e._v(e._s(e.orderDetail.expressNo?"顺丰速运":""))])],1)],1),a("el-dialog",{attrs:{title:"售后详细信息",visible:e.open,width:"1100px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[a("el-descriptions",{attrs:{column:2,border:"","label-class-name":"my-label",contentClassName:"my-content"}},[a("el-descriptions-item",{attrs:{label:"售后单号"}},[e._v(e._s(e.refundInfoDetail.id))]),a("el-descriptions-item",{attrs:{label:"售后类型"}},[e._v(e._s(e.getAftersaleType(e.refundInfoDetail)))]),a("el-descriptions-item",{attrs:{label:"申请售后时间"}},[e._v(e._s(e.parseTime(e.refundInfoDetail.applyRefundTime,"")))]),a("el-descriptions-item",{attrs:{label:"退款金额"}},[e._v("￥"+e._s(e.refundInfoDetail.refundAmount))]),a("el-descriptions-item",{attrs:{label:"申请原因"}},[e._v(e._s(e.refundInfoDetail.reason))]),a("el-descriptions-item",{attrs:{label:"具体描述"}},[e._v(e._s(e.refundInfoDetail.description))]),a("el-descriptions-item",{attrs:{label:"凭证"}},[a("el-image",{staticClass:"small-img circle-img",attrs:{src:e.refundInfoDetail.proofPics,"preview-src-list":[e.refundInfoDetail.proofPics]}})],1),a("el-descriptions-item",{attrs:{label:"申请状态"}},[e._v(e._s(e.getAftersaleStatus(e.refundInfoDetail)))]),a("el-descriptions-item",{attrs:{label:"平台拒绝理由"}},[e._v(e._s(e.refundInfoDetail.remark))]),a("el-descriptions-item",{attrs:{label:"退货快递号"}},[e._v(e._s(e.refundInfoDetail.refundWaybillCode))]),a("el-descriptions-item",{attrs:{label:"物流公司"}},[e._v(e._s(e.getExpressName(e.refundInfoDetail.refundWpCode)))]),a("el-descriptions-item",{attrs:{label:"物流进度"}},[a("el-popover",{attrs:{placement:"left",width:"300",trigger:"hover","popper-class":"popperOptions"}},[e._l(e.aliLogisticsInfoList,(function(t,r){return a("el-timeline-item",{key:r,attrs:{timestamp:t.time}},[e._v(" "+e._s(t.context)+" ")])})),a("span",{attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.refundInfoDetail.logistics))])],2)],1)],1)],1)],1)],1)},s=[],n=(a("d81d"),a("4ec9"),a("b64b"),a("d3b7"),a("3ca3"),a("0643"),a("a573"),a("ddb0"),a("c5c8")),l=a("c0c3"),i={name:"OmsAftersaleDetail",dicts:["oms_order_status","oms_pay_type","oms_aftersale_type","oms_aftersale_status"],data:function(){return{products:[],orderDetail:{},addressInfo:{},refundInfoList:[],loading:!1,experssList:[],open:!1,refundInfoDetail:{},aliLogisticsInfoList:[]}},created:function(){this.getExpressData();var e=this.$route.query.id;this.queryDetail(e).then((function(e){}))},computed:{orderStatusMap:function(){var e=this.dict.type.oms_order_status.map((function(e){return[e.value,e.label]})),t=new Map(e);return t},payTypeMap:function(){var e=this.dict.type.oms_pay_type.map((function(e){return[e.value,e.label]})),t=new Map(e);return t},aftersaleTypeMap:function(){var e=this.dict.type.oms_aftersale_type.map((function(e){return[e.value,e.label]})),t=new Map(e);return t},aftersaleStatusMap:function(){var e=this.dict.type.oms_aftersale_status.map((function(e){return[e.value,e.label]})),t=new Map(e);return t},expressMap:function(){var e=this.experssList.map((function(e){return[e.expressCode,e.expressName]}));return new Map(e)}},methods:{getExpressData:function(){var e=this;Object(l["f"])("express-set-key").then((function(t){t.data&&t.data.configValue?e.experssList=JSON.parse(t.data.configValue):e.experssList=[]}))},queryDetail:function(e){var t=this;return this.loading=!0,new Promise((function(a){return Object(n["e"])(e).then((function(e){var a=e.productList,r=e.addressInfo,s=e.refundInfoList;t.orderDetail=e,t.products=a,t.refundInfoList=s,t.addressInfo=r||{},t.loading=!1}))}))},getOrderStatus:function(e){return this.orderStatusMap.get(e.status+"")},getPayType:function(e){return this.payTypeMap.get(e.payType+"")},getAftersaleType:function(e){return this.aftersaleTypeMap.get(e.applyRefundType+"")},getAftersaleStatus:function(e){return this.aftersaleStatusMap.get(e.refundStatus+"")},getExpressName:function(e){return this.expressMap.get(e)},handleWatch:function(e){this.refundInfoDetail=e,this.refundInfoDetail.allLogistics&&(this.aliLogisticsInfoList=JSON.parse(refundInfoDetail.allLogistics)),this.open=!0},cancel:function(){this.open=!1,this.refundInfoDetail={}}}},o=i,u=(a("f7de"),a("2877")),c=Object(u["a"])(o,r,s,!1,null,null,null);t["default"]=c.exports},f7de:function(e,t,a){"use strict";a("3d8b")}}]);