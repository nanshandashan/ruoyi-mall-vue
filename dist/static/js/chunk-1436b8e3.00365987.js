(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1436b8e3","chunk-2d210f99"],{"374d":function(e,t,a){"use strict";a("7cdc")},"7cdc":function(e,t,a){},b9d0:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-cascader",e._b({ref:"cascaderMallCatergory",attrs:{options:e.menuOptions,clearable:"",placeholder:"选择类目"},on:{change:e.handleMallCatergoryChange},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}},"el-cascader",e.$props,!1))},r=[],c=a("5530"),n=(a("b0c0"),a("d3b7"),a("0643"),a("4e3e"),a("159b"),a("542c"),a("2f62")),s={name:"ProductCategorySelect",props:["value","props"],computed:Object(c["a"])(Object(c["a"])({},Object(n["b"])(["productCategories"])),{},{value1:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},menuOptions:function(){return this.productCategories&&0!==this.productCategories.length?(this.recurs(this.productCategories),this.productCategories):[]}}),methods:{handleMallCatergoryChange:function(e){if(e.length>0){var t=this.$refs["cascaderMallCatergory"].getCheckedNodes()[0].pathLabels;this.$emit("change",t)}else this.$emit("change","")},recurs:function(e){var t=this;e.forEach((function(e){e.label=e.name,e.value=e.id,e.children&&t.recurs(e.children)}))}},created:function(){this.$store.dispatch("mall/loadProductCategories")}},u=s,i=a("2877"),l=Object(i["a"])(u,o,r,!1,null,"2d0a5b5d",null);t["default"]=l.exports},cd55:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.chooseSkuObj.title,visible:e.chooseSkuObj.open,width:e.chooseSkuObj.width,"append-to-body":""},on:{"update:visible":function(t){return e.$set(e.chooseSkuObj,"open",t)}}},[a("el-form",{ref:"auditForm",attrs:{inline:"",model:e.chooseSkuObj.queryParams,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"菜品名称",prop:"nameLike"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入菜品名称",clearable:""},model:{value:e.chooseSkuObj.queryParams.nameLike,callback:function(t){e.$set(e.chooseSkuObj.queryParams,"nameLike",t)},expression:"chooseSkuObj.queryParams.nameLike"}})],1),a("el-form-item",{attrs:{label:"菜品分类",prop:"productCategoryName"}},[a("product-category-select",{model:{value:e.chooseSkuObj.queryParams.categoryId,callback:function(t){e.$set(e.chooseSkuObj.queryParams,"categoryId",t)},expression:"chooseSkuObj.queryParams.categoryId"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.getSkuList}},[e._v("搜索")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.chooseSkuObj.loading,expression:"chooseSkuObj.loading"}],ref:"table",staticClass:"mt20",attrs:{data:e.chooseSkuObj.list,"max-height":"500",border:"","row-key":"id"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center","reserve-selection":!0}}),a("el-table-column",{attrs:{label:"菜品名称",prop:"name"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[a("div",{staticClass:"flex-center"},[o.pic?a("el-image",{staticClass:"small-img circle-img",attrs:{src:o.pic,"preview-src-list":[o.pic]}}):e._e(),a("span",{staticClass:"ml5"},[e._v(e._s(o.name))])],1)]}}])}),a("el-table-column",{attrs:{label:"销量",prop:"sales"}}),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime"}})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.chooseSkuObj.total>0,expression:"chooseSkuObj.total>0"}],attrs:{total:e.chooseSkuObj.total,page:e.chooseSkuObj.queryParams.pageNum,limit:e.chooseSkuObj.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.chooseSkuObj.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.chooseSkuObj.queryParams,"pageSize",t)},pagination:e.getSkuList}}),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.chooseSkuObj.open=!1}}},[e._v("取 消")])],1)],1)},r=[],c=a("2909"),n=a("5530"),s=a("c14f"),u=a("1da1"),i=(a("d3b7"),a("0643"),a("4e3e"),a("9a9a"),a("159b"),a("d35a")),l=a("b9d0"),d={components:{ProductCategorySelect:l["default"]},data:function(){return{selectSkuIds:[],selectProducts:[],chooseSkuObj:{loading:!1,open:!1,title:"选择菜品",list:[],width:"60%",queryParams:{pageNum:1,categoryId:null,pageSize:10,nameLike:null,publishStatus:1,excludeProductIds:[]},total:0}}},methods:{submitForm:function(){this.$emit("onComplete",this.selectProducts),this.chooseSkuObj.open=!1},init:function(e){var t=this;return Object(u["a"])(Object(s["a"])().m((function a(){return Object(s["a"])().w((function(a){while(1)switch(a.n){case 0:return t.chooseSkuObj.queryParams.excludeProductIds=e,t.chooseSkuObj.queryParams.pageNum=1,a.n=1,t.getSkuList();case 1:t.chooseSkuObj.open=!0,t.$nextTick((function(){t.$refs.table.clearSelection()}));case 2:return a.a(2)}}),a)})))()},judge:function(){var e=this;this.$nextTick((function(){e.chooseSkuObj.list.forEach((function(t){e.selectProducts.some((function(e){return e.id===t.id}))?e.$refs.table.toggleRowSelection(t,!0):e.$refs.table.toggleRowSelection(t,!1)}))}))},handleSelectionChange:function(e){this.selectProducts=e},getSkuList:function(){var e=this;return Object(u["a"])(Object(s["a"])().m((function t(){var a,o,r,u,l;return Object(s["a"])().w((function(t){while(1)switch(t.n){case 0:return e.chooseSkuObj.loading=!0,a=Object(n["a"])(Object(n["a"])({},e.chooseSkuObj.queryParams),{},{pageNum:void 0,pageSize:void 0}),a.categoryId&&Array.isArray(a.categoryId)&&(a.categoryId=a.categoryId.pop()),o=e.chooseSkuObj.queryParams,r=o.pageNum,u=o.pageSize,l={page:r-1,size:u},t.n=1,Object(i["d"])(a,l).then((function(t){var a=t.content,o=t.totalElements;e.chooseSkuObj.list=Object(c["a"])(a),e.chooseSkuObj.total=o,e.chooseSkuObj.loading=!1}));case 1:return t.a(2)}}),t)})))()}}},h=d,p=(a("374d"),a("2877")),b=Object(p["a"])(h,o,r,!1,null,null,null);t["default"]=b.exports},d35a:function(e,t,a){"use strict";a.d(t,"d",(function(){return r})),a.d(t,"c",(function(){return c})),a.d(t,"a",(function(){return n})),a.d(t,"e",(function(){return s})),a.d(t,"b",(function(){return u}));var o=a("b775");function r(e,t){return Object(o["a"])({url:"/pms/product/list",method:"post",data:e,params:t})}function c(e){return Object(o["a"])({url:"/pms/product/"+e,method:"get"})}function n(e){return Object(o["a"])({url:"/pms/product",method:"post",data:e})}function s(e){return Object(o["a"])({url:"/pms/product",method:"put",data:e})}function u(e){return Object(o["a"])({url:"/pms/product/"+e,method:"delete"})}}}]);