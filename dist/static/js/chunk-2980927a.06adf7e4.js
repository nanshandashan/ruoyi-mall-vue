(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2980927a","chunk-1436b8e3","chunk-76367b80","chunk-2d210f99"],{1362:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"queryForm",staticClass:"ry_form",attrs:{model:e.queryParams,inline:!0,"label-width":"100px",size:"medium"}},[a("el-form-item",{attrs:{label:"活动名称",prop:"title"}},[a("el-input",{attrs:{placeholder:"请输入活动名称",clearable:"",size:"small"},model:{value:e.queryParams.title,callback:function(t){e.$set(e.queryParams,"title",t)},expression:"queryParams.title"}})],1),a("el-form-item",{attrs:{label:"使用范围",prop:"useScope"}},[a("DictRadio",{attrs:{size:"small",radioData:e.dict.type.coupon_use_scope,showAll:"all"},on:{change:e.handleQuery},model:{value:e.queryParams.useScope,callback:function(t){e.$set(e.queryParams,"useScope",t)},expression:"queryParams.useScope"}})],1),a("el-form-item",{attrs:{label:"兑换类型",prop:"couponType"}},[a("DictRadio",{attrs:{size:"small",radioData:e.dict.type.coupon_exchange_type,showAll:"all"},on:{change:e.handleQuery},model:{value:e.queryParams.couponType,callback:function(t){e.$set(e.queryParams,"couponType",t)},expression:"queryParams.couponType"}})],1),a("el-form-item",{staticClass:"flex_one tr"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")])],1)],1),a("el-row",{staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["act:couponActivity:opt"],expression:"['act:couponActivity:opt']"}],attrs:{type:"primary",plain:"",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增 ")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.CouponActivityList,border:""}},[a("el-table-column",{attrs:{label:"活动名称",prop:"title"}}),a("el-table-column",{attrs:{label:"使用范围",prop:"useScope"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("dict-tag",{attrs:{value:e.row.useScope,"prop-name":"coupon_use_scope"}})]}}])}),a("el-table-column",{attrs:{label:"优惠内容"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.minAmount?a("span",[e._v("满"+e._s(t.row.minAmount)+"元，优惠"+e._s(t.row.couponAmount)+"元")]):a("span",[e._v("无门槛，优惠"+e._s(t.row.couponAmount)+"元")])]}}])}),a("el-table-column",{attrs:{label:"发行总数",prop:"totalCount"}}),a("el-table-column",{attrs:{label:"剩余总数",prop:"leftCount"}}),a("el-table-column",{attrs:{label:"已使用",prop:"useCount"}}),a("el-table-column",{attrs:{label:"每人限领",prop:"userLimit"}}),a("el-table-column",{attrs:{label:"兑换类型",prop:"couponType"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("dict-tag",{attrs:{value:e.row.couponType,"prop-name":"coupon_exchange_type"}})]}}])}),a("el-table-column",{attrs:{label:"要兑换的积分",prop:"useIntegral"}}),a("el-table-column",{attrs:{label:"活动时间",prop:"beginTime",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(t.row.beginTime))]),a("p",[e._v(" ~ ")]),a("p",[e._v(e._s(t.row.endTime))])]}}])}),a("el-table-column",{attrs:{label:"操作","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return e.seeCouponList(t.row)}}},[e._v("领取记录 ")]),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["act:couponActivity:opt"],expression:"['act:couponActivity:opt']"}],attrs:{size:"mini",type:"text"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("修改 ")]),t.row.leftCount===t.row.totalCount?a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["act:couponActivity:opt"],expression:"['act:couponActivity:opt']"}],attrs:{size:"mini",type:"text"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除 ")]):e._e()]}}])})],1),a("InBody",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}]},[a("pagination",{attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],1),a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"50%","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"108px"}},[a("el-form-item",{attrs:{label:"活动名称",prop:"title"}},[a("el-input",{attrs:{placeholder:"请输入活动名称"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),a("el-form-item",{attrs:{label:"发放数量",prop:"totalCount"}},[a("el-input-number",{staticStyle:{width:"220px"},attrs:{placeholder:"请输入发放数量",min:1,disabled:e.form.id},model:{value:e.form.totalCount,callback:function(t){e.$set(e.form,"totalCount",t)},expression:"form.totalCount"}})],1),a("el-form-item",{attrs:{label:"每人限领",prop:"userLimit"}},[a("el-input",{staticStyle:{width:"220px"},model:{value:e.form.userLimit,callback:function(t){e.$set(e.form,"userLimit",t)},expression:"form.userLimit"}},[a("template",{slot:"append"},[e._v("张")])],2)],1),a("el-form-item",{attrs:{label:"最低消费金额",prop:"minAmount"}},[a("el-input",{staticStyle:{width:"220px"},model:{value:e.form.minAmount,callback:function(t){e.$set(e.form,"minAmount",t)},expression:"form.minAmount"}},[a("template",{slot:"append"},[e._v("元")])],2)],1),a("el-form-item",{attrs:{label:"优惠券金额",prop:"couponAmount"}},[a("el-input",{staticStyle:{width:"220px"},model:{value:e.form.couponAmount,callback:function(t){e.$set(e.form,"couponAmount",t)},expression:"form.couponAmount"}},[a("template",{slot:"append"},[e._v("元")])],2)],1),a("el-form-item",{attrs:{label:"兑换类型",prop:"couponType"}},[a("el-radio-group",{attrs:{disabled:e.form.id},model:{value:e.form.couponType,callback:function(t){e.$set(e.form,"couponType",t)},expression:"form.couponType"}},[a("el-radio",{attrs:{label:1}},[e._v("免费兑换")]),a("el-radio",{attrs:{label:2}},[e._v("积分兑换")])],1)],1),2===e.form.couponType?a("el-form-item",{attrs:{label:"要兑换的积分",prop:"useIntegral"}},[a("el-input-number",{staticStyle:{width:"220px"},attrs:{placeholder:"请输入要兑换的积分",disabled:e.form.id},model:{value:e.form.useIntegral,callback:function(t){e.$set(e.form,"useIntegral",t)},expression:"form.useIntegral"}})],1):e._e(),a("el-form-item",{attrs:{label:"活动开始时间",prop:"beginTime"}},[a("el-date-picker",{attrs:{clearable:"",size:"small",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择活动开始时间"},model:{value:e.form.beginTime,callback:function(t){e.$set(e.form,"beginTime",t)},expression:"form.beginTime"}})],1),a("el-form-item",{attrs:{label:"活动结束时间",prop:"endTime"}},[a("el-date-picker",{attrs:{clearable:"",size:"small",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择活动结束时间"},model:{value:e.form.endTime,callback:function(t){e.$set(e.form,"endTime",t)},expression:"form.endTime"}})],1),a("el-form-item",{attrs:{label:"使用范围",prop:"useScope"}},[a("el-radio-group",{attrs:{disabled:e.form.id},model:{value:e.form.useScope,callback:function(t){e.$set(e.form,"useScope",t)},expression:"form.useScope"}},[a("el-radio",{attrs:{label:1}},[e._v("全场通用")]),a("el-radio",{attrs:{label:2}},[e._v("指定商品可用")]),a("el-radio",{attrs:{label:3}},[e._v("指定商品不可用")])],1)],1),[2,3].includes(e.form.useScope)?a("el-form-item",{attrs:{label:"商品列表",prop:"productIds"}},[a("el-button",{attrs:{size:"small"},on:{click:e.chooseSku}},[e._v("选择商品")]),a("el-table",{staticClass:"mt10",attrs:{data:e.productList,"max-height":"300px",border:""}},[a("el-table-column",{attrs:{label:"菜品信息"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[a("div",{staticClass:"flex-center"},[o.pic?a("el-image",{staticClass:"small-img circle-img",attrs:{src:o.pic,"preview-src-list":[o.pic]}}):e._e(),a("span",{staticClass:"ml5"},[e._v(e._s(o.name))])],1)]}}],null,!1,3450469085)}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[a("span",{staticClass:"red ml5 pointer",on:{click:function(t){return e.delProduct(o)}}},[e._v("删除")])]}}],null,!1,1504214396)})],1)],1):e._e()],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1),a("product-select",{ref:"productSelect",on:{onComplete:e.completeProductIds}}),a("receive-list",{ref:"receiveListRef"})],1)},r=[],n=a("5530"),i=(a("99af"),a("4de4"),a("a15b"),a("d81d"),a("d3b7"),a("0643"),a("2382"),a("a573"),a("b775"));function l(e,t){return Object(i["a"])({url:"/act/couponActivity/list",method:"post",data:e,params:t})}function s(e){return Object(i["a"])({url:"/act/couponActivity",method:"post",data:e})}function u(e){return Object(i["a"])({url:"/act/couponActivity",method:"put",data:e})}function c(e){return Object(i["a"])({url:"/act/couponActivity/"+e,method:"delete"})}function p(e){return Object(i["a"])({url:"/act/couponActivity/export",method:"get",params:e})}var m=a("cd55"),d=a("e919"),f={name:"CouponActivity",components:{ProductSelect:m["default"],receiveList:d["default"]},dicts:["coupon_use_scope","coupon_exchange_type"],data:function(){return{loading:!0,productList:[],exportLoading:!1,ids:[],total:0,CouponActivityList:[],title:"",open:!1,queryParams:{pageNum:1,pageSize:10,title:null,useScope:null,couponType:null},form:{},rules:{title:[{required:!0,message:"活动名称不能为空",trigger:"blur"}],useScope:[{required:!0,message:"使用范围不能为空",trigger:"change"}],totalCount:[{required:!0,message:"发行总数不能为空",trigger:"blur"}],userLimit:[{required:!0,message:"每人限领不能为空",trigger:"blur"}],couponAmount:[{required:!0,message:"优惠券金额不能为空",trigger:"blur"}],couponType:[{required:!0,message:"兑换类型不能为空",trigger:"change"}],beginTime:[{required:!0,message:"活动开始时间不能为空",trigger:"change"}],endTime:[{required:!0,message:"活动结束时间不能为空",trigger:"change"}]},showMoreCondition:!1}},created:function(){this.getList()},methods:{delProduct:function(e){this.productList=this.productList.filter((function(t){return t.id!==e.id})),this.completeProductIds([])},completeProductIds:function(e){this.productList=this.productList.concat(e),this.productList.length?this.form.productIds=this.productList.map((function(e){return e.id})).join():this.form.productIds=null},chooseSku:function(){this.$refs.productSelect.init(this.productList.map((function(e){return e.id})))},getList:function(){var e=this;this.loading=!0;var t=this.queryParams,a=t.pageNum,o=t.pageSize,r=Object(n["a"])(Object(n["a"])({},this.queryParams),{},{pageNum:void 0,pageSize:void 0}),i={page:a-1,size:o};l(r,i).then((function(t){var a=t.content,o=t.totalElements;e.CouponActivityList=a,e.total=o,e.loading=!1}))},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={id:null,title:null,useScope:1,productIds:null,totalCount:null,userLimit:1,couponAmount:null,minAmount:null,useIntegral:null,couponType:1,beginTime:null,endTime:null},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},handleAdd:function(){this.productList=[],this.reset(),this.open=!0,this.title="添加优惠券活动"},seeCouponList:function(e){this.$refs.receiveListRef.init(e.id)},handleUpdate:function(e){this.productList=e.productList,this.form=e,this.open=!0,this.title="修改优惠券活动"},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(null!=e.form.id?(delete e.form.createTime,u(e.form).then((function(t){e.$modal.msgSuccess("修改成功"),e.open=!1,e.getList()}))):s(e.form).then((function(t){e.$modal.msgSuccess("新增成功"),e.open=!1,e.getList()})))}))},handleDelete:function(e){var t=this,a=e.id||this.ids;this.$modal.confirm("是否确认删除优惠券活动【"+e.title+"】？").then((function(){return c(a)})).then((function(){t.getList(),t.$modal.msgSuccess("删除成功")})).catch((function(){}))},handleExport:function(){var e=this,t=this.queryParams;this.$modal.confirm("是否确认导出所有优惠券活动表数据项？").then((function(){return e.exportLoading=!0,p(t)})).then((function(t){e.$download.download(t),e.exportLoading=!1})).catch((function(){}))}}},b=f,h=a("2877"),g=Object(h["a"])(b,o,r,!1,null,null,null);t["default"]=g.exports},"374d":function(e,t,a){"use strict";a("7cdc")},"4e24":function(e,t,a){"use strict";a.d(t,"e",(function(){return r})),a.d(t,"d",(function(){return n})),a.d(t,"a",(function(){return i})),a.d(t,"f",(function(){return l})),a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return u}));var o=a("b775");function r(e,t){return Object(o["a"])({url:"/act/memberCoupon/list",method:"post",data:e,params:t})}function n(e){return Object(o["a"])({url:"/act/memberCoupon/"+e,method:"get"})}function i(e){return Object(o["a"])({url:"/act/memberCoupon",method:"post",data:e})}function l(e){return Object(o["a"])({url:"/act/memberCoupon",method:"put",data:e})}function s(e){return Object(o["a"])({url:"/act/memberCoupon/"+e,method:"delete"})}function u(e){return Object(o["a"])({url:"/act/memberCoupon/export",method:"get",params:e})}},"7cdc":function(e,t,a){},b9d0:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-cascader",e._b({ref:"cascaderMallCatergory",attrs:{options:e.menuOptions,clearable:"",placeholder:"选择类目"},on:{change:e.handleMallCatergoryChange},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}},"el-cascader",e.$props,!1))},r=[],n=a("5530"),i=(a("b0c0"),a("d3b7"),a("0643"),a("4e3e"),a("159b"),a("542c"),a("2f62")),l={name:"ProductCategorySelect",props:["value","props"],computed:Object(n["a"])(Object(n["a"])({},Object(i["b"])(["productCategories"])),{},{value1:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},menuOptions:function(){return this.productCategories&&0!==this.productCategories.length?(this.recurs(this.productCategories),this.productCategories):[]}}),methods:{handleMallCatergoryChange:function(e){if(e.length>0){var t=this.$refs["cascaderMallCatergory"].getCheckedNodes()[0].pathLabels;this.$emit("change",t)}else this.$emit("change","")},recurs:function(e){var t=this;e.forEach((function(e){e.label=e.name,e.value=e.id,e.children&&t.recurs(e.children)}))}},created:function(){this.$store.dispatch("mall/loadProductCategories")}},s=l,u=a("2877"),c=Object(u["a"])(s,o,r,!1,null,"2d0a5b5d",null);t["default"]=c.exports},cd55:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.chooseSkuObj.title,visible:e.chooseSkuObj.open,width:e.chooseSkuObj.width,"append-to-body":""},on:{"update:visible":function(t){return e.$set(e.chooseSkuObj,"open",t)}}},[a("el-form",{ref:"auditForm",attrs:{inline:"",model:e.chooseSkuObj.queryParams,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"菜品名称",prop:"nameLike"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入菜品名称",clearable:""},model:{value:e.chooseSkuObj.queryParams.nameLike,callback:function(t){e.$set(e.chooseSkuObj.queryParams,"nameLike",t)},expression:"chooseSkuObj.queryParams.nameLike"}})],1),a("el-form-item",{attrs:{label:"菜品分类",prop:"productCategoryName"}},[a("product-category-select",{model:{value:e.chooseSkuObj.queryParams.categoryId,callback:function(t){e.$set(e.chooseSkuObj.queryParams,"categoryId",t)},expression:"chooseSkuObj.queryParams.categoryId"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.getSkuList}},[e._v("搜索")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.chooseSkuObj.loading,expression:"chooseSkuObj.loading"}],ref:"table",staticClass:"mt20",attrs:{data:e.chooseSkuObj.list,"max-height":"500",border:"","row-key":"id"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center","reserve-selection":!0}}),a("el-table-column",{attrs:{label:"菜品名称",prop:"name"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[a("div",{staticClass:"flex-center"},[o.pic?a("el-image",{staticClass:"small-img circle-img",attrs:{src:o.pic,"preview-src-list":[o.pic]}}):e._e(),a("span",{staticClass:"ml5"},[e._v(e._s(o.name))])],1)]}}])}),a("el-table-column",{attrs:{label:"销量",prop:"sales"}}),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime"}})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.chooseSkuObj.total>0,expression:"chooseSkuObj.total>0"}],attrs:{total:e.chooseSkuObj.total,page:e.chooseSkuObj.queryParams.pageNum,limit:e.chooseSkuObj.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.chooseSkuObj.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.chooseSkuObj.queryParams,"pageSize",t)},pagination:e.getSkuList}}),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.chooseSkuObj.open=!1}}},[e._v("取 消")])],1)],1)},r=[],n=a("2909"),i=a("5530"),l=a("c14f"),s=a("1da1"),u=(a("d3b7"),a("0643"),a("4e3e"),a("9a9a"),a("159b"),a("d35a")),c=a("b9d0"),p={components:{ProductCategorySelect:c["default"]},data:function(){return{selectSkuIds:[],selectProducts:[],chooseSkuObj:{loading:!1,open:!1,title:"选择菜品",list:[],width:"60%",queryParams:{pageNum:1,categoryId:null,pageSize:10,nameLike:null,publishStatus:1,excludeProductIds:[]},total:0}}},methods:{submitForm:function(){this.$emit("onComplete",this.selectProducts),this.chooseSkuObj.open=!1},init:function(e){var t=this;return Object(s["a"])(Object(l["a"])().m((function a(){return Object(l["a"])().w((function(a){while(1)switch(a.n){case 0:return t.chooseSkuObj.queryParams.excludeProductIds=e,t.chooseSkuObj.queryParams.pageNum=1,a.n=1,t.getSkuList();case 1:t.chooseSkuObj.open=!0,t.$nextTick((function(){t.$refs.table.clearSelection()}));case 2:return a.a(2)}}),a)})))()},judge:function(){var e=this;this.$nextTick((function(){e.chooseSkuObj.list.forEach((function(t){e.selectProducts.some((function(e){return e.id===t.id}))?e.$refs.table.toggleRowSelection(t,!0):e.$refs.table.toggleRowSelection(t,!1)}))}))},handleSelectionChange:function(e){this.selectProducts=e},getSkuList:function(){var e=this;return Object(s["a"])(Object(l["a"])().m((function t(){var a,o,r,s,c;return Object(l["a"])().w((function(t){while(1)switch(t.n){case 0:return e.chooseSkuObj.loading=!0,a=Object(i["a"])(Object(i["a"])({},e.chooseSkuObj.queryParams),{},{pageNum:void 0,pageSize:void 0}),a.categoryId&&Array.isArray(a.categoryId)&&(a.categoryId=a.categoryId.pop()),o=e.chooseSkuObj.queryParams,r=o.pageNum,s=o.pageSize,c={page:r-1,size:s},t.n=1,Object(u["d"])(a,c).then((function(t){var a=t.content,o=t.totalElements;e.chooseSkuObj.list=Object(n["a"])(a),e.chooseSkuObj.total=o,e.chooseSkuObj.loading=!1}));case 1:return t.a(2)}}),t)})))()}}},m=p,d=(a("374d"),a("2877")),f=Object(d["a"])(m,o,r,!1,null,null,null);t["default"]=f.exports},d35a:function(e,t,a){"use strict";a.d(t,"d",(function(){return r})),a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return i})),a.d(t,"e",(function(){return l})),a.d(t,"b",(function(){return s}));var o=a("b775");function r(e,t){return Object(o["a"])({url:"/pms/product/list",method:"post",data:e,params:t})}function n(e){return Object(o["a"])({url:"/pms/product/"+e,method:"get"})}function i(e){return Object(o["a"])({url:"/pms/product",method:"post",data:e})}function l(e){return Object(o["a"])({url:"/pms/product",method:"put",data:e})}function s(e){return Object(o["a"])({url:"/pms/product/"+e,method:"delete"})}},e919:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"领取记录",visible:e.open,width:"80%","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{staticClass:"ry_form",attrs:{model:e.queryParams,inline:!0,"label-width":"100px",size:"medium"}},[a("el-form-item",{attrs:{label:"使用状态",prop:"useStatus"}},[a("DictRadio",{attrs:{size:"small",radioData:e.dict.type.activity_coupon_status,showAll:"all"},on:{change:e.handleQuery},model:{value:e.queryParams.useStatus,callback:function(t){e.$set(e.queryParams,"useStatus",t)},expression:"queryParams.useStatus"}})],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.tableList,border:""}},[a("el-table-column",{attrs:{label:"券ID",prop:"id"}}),a("el-table-column",{attrs:{label:"用户信息 "},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"flex-center"},[a("el-avatar",{attrs:{src:t.row.avatar}}),a("div",{staticClass:"tl ml5"},[a("p",[e._v(e._s(t.row.nickname))]),a("p",[e._v(e._s(t.row.phone))])])],1)]}}])}),a("el-table-column",{attrs:{label:"领取时间",prop:"createTime",width:"180"}}),a("el-table-column",{attrs:{label:"使用状态"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("dict-tag",{attrs:{value:e.row.useStatus,"prop-name":"activity_coupon_status"}})]}}])}),a("el-table-column",{attrs:{label:"有效期",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(t.row.beginTime))]),a("p",[e._v(" ~ ")]),a("p",[e._v(e._s(t.row.endTime))])]}}])}),a("el-table-column",{attrs:{label:"订单号",prop:"orderId"}}),a("el-table-column",{attrs:{label:"使用时间",prop:"useTime",width:"180"}})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],1)},r=[],n=a("5530"),i=a("c14f"),l=a("1da1"),s=a("4e24"),u={dicts:["activity_coupon_status"],data:function(){return{open:!1,loading:!1,tableList:[],queryParams:{pageNum:1,pageSize:10,useStatus:null,couponActivityId:null},total:0}},methods:{init:function(e){var t=this;return Object(l["a"])(Object(i["a"])().m((function a(){return Object(i["a"])().w((function(a){while(1)switch(a.n){case 0:if(e){a.n=1;break}return a.a(2);case 1:return t.queryParams.couponActivityId=e,a.n=2,t.handleQuery();case 2:t.open=!0;case 3:return a.a(2)}}),a)})))()},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},getList:function(){var e=this;this.loading=!0;var t=this.queryParams,a=t.pageNum,o=t.pageSize,r=Object(n["a"])(Object(n["a"])({},this.queryParams),{},{pageNum:void 0,pageSize:void 0}),i={page:a-1,size:o};return Object(s["e"])(r,i).then((function(t){var a=t.content,o=t.totalElements;e.tableList=a,e.total=o,e.loading=!1}))}}},c=u,p=a("2877"),m=Object(p["a"])(c,o,r,!1,null,null,null);t["default"]=m.exports}}]);